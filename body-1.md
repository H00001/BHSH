
# 课题研究与开发技术基础

## AT89C51单片机

at89c51是一个os8-bit微处理器(fpeam只读存储器-flashprog随机存取只读存储器fpram和一个可自动擦除随机存取只读数据的存储器)，俗称嵌入式微控制器。该设计原件是采用基于atmel的高密度非易失性只读存储器的制造技术设计制造，与符合行业标准的atmcs-51指令集与输出引脚指令集是兼容的并可以一直连接到。由于多功能8位中央处理器和闪存指令集结合在一个独立的单芯片中，atmel的at89c51是一个高效的嵌入式微控制器，它为许多的嵌入式控制系统应用提供了一个灵活和廉价的解决方案。

![3-8硬件电路图](http://my.gunplan.top/static/3.2.png)

at89c51可由一个atmel公司的控制器在线进行编程，用于嵌入式温度数据采集和嵌入式数据通信。at89c51是一款低成本功耗、高性能的cmos8位嵌入式单片机，其中主要包含了可通过重复自动擦除1000次的闪存和具有8k字节的isp(指令系统内的prog随机存取程序和存储器matlable)的嵌入式闪存只读程序和存储器，该芯片元器件主要采用了基于atmel的一种高密度、非易失性的嵌入式存储技术设计制造，兼容了标准的mcs-53指令系统和80c51引脚的结构。该系列芯片元器件集成了一个通用的8位中央处理器和一个isp的嵌入式闪存存储单元，功能强大的微型嵌入式计算机的at89c51可以为许多嵌入式控制和管理系统的应用和分析指令系统的发展历程提供一些具有降低生产成本和经济效益的解决问题的方案。at89c51具有以下的特点：40针、4k字节闪存片上应用程序数据存储器、128字节随机存取应用程序数据存储器(随机存取数据存储器)、32个外部双向数据输入/外部输出(i/o)串行通信端口，5个串行中断优先级，2个串行中断优先级嵌套中断，2个16位的可编程定时计数器，2个全双工串行通信控制端口，watchdog(wdt)控制电路，片上时钟振荡器。

### 编程方式

at89c51有三个并行的i/o口，p0：p0.0~p0.7，p1.0~p1.7，p2.0~p2.7。此外，当没有片上或外部存储器时，p0端口可以用作公共i/o的端口，当主机使用外部或片上存储器时，p0端口也可以直接用作地址数据线/端口或数据线。p1端口也可以直接作为一个通用的公共i/o端口，p1.0、p1.1、p1.5~p1.7也可以具有特殊的端口功能，如表3.4所示。当主机没有片外存储器时，p2端口可以直接用作公共的i/o端口，当主机使用外部存储器时，p2端口也可以直接用作高8位地址。

|引脚|特殊功能|
|:-:|:-:|
|P1.0|T2：定时器|
|P1.1|T2EX：定时器|
|P1.5| MOSI：用于在线编程(ISP)|
|P1.6| MOSI：用于在线编程(ISP)|
|P1.7| SCK：用于在线编程(ISP)|

表3.4 at89c51p1端口的特殊控制功能

|引脚|特殊功能|
|:-:|:-:|
|P3.0|RXD (串行端口输入)|
|P3.1|TXD (串行端口输入)|
|P3.2|INT0(外部中断输入0)|
|P3.3|INT1(外部中断输入1)|
|P3.4 |T0(定时器0外部输入)|
|p3.5|t1(外部定时器1外部定时信号发出输入)|
|P3.6 |WR (外部数据存储器写控制)|
|p3.7|rd(外部的数据存储器对外部读取和控制)|

表3.5 AT89C51 P3端口的特殊功能

## MF52NTC热敏电阻

NTC（负温度系数）是负百分比电阻变化每度℃.要确定一个精确的电阻误差的热敏电阻的温度系数，高精度小体积MF52NTC热敏电阻探头要比玻封外型探头更小而引线绝缘，其设计非常可靠,工作环境温度 -50℃至125℃，快速的反应时间和高可靠性使它更加适用于医疗设备和电子温度计产品系列.

过热保护器件用于保护设备及内部电路，防止受到发热的影响。
PTC热敏电阻（温度检测传感器)在室温环境下电阻值不会发生变化，但一旦超过某一温度（居里点)，电阻值便会急速上升，通过利用这一特性，能够检测到异常发热。
此外，贴片NTC热敏电阻应用了从积层贴片陶瓷片式电容器中积累而来的积层技术，并在世界范围内率先生产出了行业最小形状的产品。

### NTC负温度系数热敏电阻构成

NTC（Negative Temperature Coefficient）是指随温度上升电阻呈指数关系减小、具有负温度系数的热敏电阻现象和材料．该材料是利用锰、铜、硅、钴、铁、镍、锌等两种或两种以上的金属氧化物进行充分混合、成型、烧结等工艺而成的半导体陶瓷，可制成具有负温度系数（NTC）的热敏电阻．其电阻率和材料常数随材料成分比例、烧结气氛、烧结温度和结构状态不同而变化．现在还出现了以碳化硅、硒化锡、氮化钽等为代表的非氧化物系NTC热敏电阻]材料。

NTC热敏半导瓷大多是尖晶石结构或其他结构的氧化物陶瓷，具有负的温度系数，电阻值可近似表示为：

式中RT、RT0分别为温度T、T0时的电阻值，Bn为材料常数．陶瓷晶粒本身由于温度变化而使电阻率发生变化，这是由半导体特性决定的。

### MF52NTC热敏电阻参数
温度传感器绝缘引线规格: UL 3398 22AWG.黑色  
传感器端子规格：XH 2.5黑色 
HOUSING规格：XH 2.5-2P.  
NTC温度传感器未标注尺寸公差为±1.5mm.  
热敏电阻器符合RoHS要求.  
NTC热敏电阻规格：R25=10K±1% B25/85=3435  

### MF52NTC热敏电阻特点
1. 体积小适用于狭窄空间
2. 快速响应时间，灵敏度高
3. .引线耐弯折及易焊接
4. 热敏电阻优良的电绝缘性能
5. NTC探头引线尺寸可按要求定制



### NTC热敏电阻的温度特性符合指数规律：

![equation.pdf](blob:file:///9749cfd7-5dc9-4dbf-ac27-da979b1b26c5)             （2-1）

式中：*R*t为绝对温度时的电阻值、R0为参考温度T0 (K)下的电阻值，单位Ω，*B*为热敏电阻的负温度材料系数。

由于*B*值并不是稳定不变的，随着温度的变化，*B*值也会相应的变化。所以NTC热敏电阻在实际中的特性只能用指数关系曲线来粗略的概述，用这样的方法仅仅能将温度在一定的精度确定温度值和电阻值所在的范围。




## Atmega8l-8AU 芯片
主芯片的选择：对于本设计来讲有要实现功能很多，测量的量要实现很复杂，同时要求实物体积尽量小，所以就要选择一款功能是十分强大而且外部引脚较多的单片机。所以我选择了Atmega8l-8AU，这种单片机相对比51来讲传输速度更快，内部资源更丰富，同时其驱动能力更强每个端口都能设为输入输出，性价比高。

### Atmega8l-8AU具有的优势
Atmega8l-8AU 有如下特点:

1. 单片机内部具有高质量的Flash程序存储器大小为8K，支持ISP和IAP。便于程序的调试和开发。内部512字节EEPROM就有寿命长，可以长期保存数据避免断电丢失。内部RAM容量大并且能够满足高级语言开发[7]。
2. 单片机的外部I/O接口全部可以设置上拉电阻，并且可以单独设定为输入和输出两种模式。也可以设置为高阻态输入。I/O口具有资源灵活、驱动能力强大、功能强大的特点。
3. 单片机内部包含许多种独立的时钟分频器，为UART、I2C、SPI提供使用。这其中的8位或者16位定时器配合的具有多达10位的预分频器，能够通过程序的设定的分频系数提供多种定时时间[8]。单片机内独有的定时器/计数器双向形成的三角波，在和输出比较寄存器相互配合，形成占空比可变、频率可变、相位可变的方波设计方法[9]。
4. 单片机具备增强型的高速同步异步串口，可以实现硬件生成校验码、硬件检测和校验、两级接收缓冲、在接收时能够主动调整定位波特率，屏蔽数据帧数等功能，提高了通信的可靠性，程序编写更加方便，方便组成分布式网络和实现多机通信系统的复杂应用。由于串口功能十分强大，单片机速度快，中断响应时间比较短，能够实现高波特波特率通信。
5. 具有面向字节的高速硬件串行接口TWI、SPI。TWI与I2C接口兼容，能够实现主从机的接收和发送的全部4种组合的多机通信[10]。
6. 单片机具有自动上电的复位电路、独立的看门狗、低电压检测电路，多个复位源，能够设置在系统启动后延时程序运行。
7. 单片机内还具有多种省电休眠模式，抗干扰能力强



## Progisp

progisp是一款USB编程下载器，支持对所有的AVR芯片进行编程，还可以对数据改变下载、比较识别字，芯片擦除等选项进行选择。

### 功能特点

1. 可通过progisp对免驱动USB下载器进行在线升级。
2. 可以编写所有atmel的低压isp编程接口的avr单片机/s5x/s8253/93cxx/24cxx
3. 可以通过progisp自定义支持最新型号的芯片的编程。
4. 适应电压宽（2.7v-5.5v）
5. 可为目标板提供时钟（对于AVR锁定芯片特别有用）
6. 可超低速下载（使用32768HZ的精振）
7. 下载速度快（8K程序大约2秒）
8. 可配合progisp实现编程项目的工程化管理

### 使用方式
1. 选择芯片
点击选择芯片的下拉框，选择要下载的芯片。
点击“黑色的箭头”可以弹出下载器与你的目标 cpu 的提示接线图或 cpu 在编程座上的
摆放位置图，如果是 isp 下载线是 10pin下载线接口与目标 cpu的连线示意图
如果是 hv 模式是 cpu 在编程座上的摆放位置图
2. 编程选项
勾选“编程栏”相应的编程选项，点击“自动”可以完成编程。如果出错会有对话框弹
出进行提示。如果写入成功，信息提示栏会显示出相应成功的信息。也可以点击“擦除”擦
除芯片。
【提供时钟】勾选配合下载器的 XTAL 引脚可以解锁部分 avr 锁定芯片（ISP 模式有用）使
用方法 XTAL 连接目标板 cpu 的 XTAL1 引脚。这时就可以进入编程模式（锁定芯片是进入
不了编程模式的）。
【数据改变下载】指的是你调入的数据区的文件一旦改变，progisp 会自动执行“自动”执
行相应的动作。
【数据自动重载】指的是你调入的数据区的文件一旦改变且您点击了”自动“按钮，progisp
会重新调入您调入数据的文件，这个选项选中关闭 progisp，下次启动时会自动调入您最后
一次调入的文件。
所有的动作均可选择相应的主菜单来实现。
3. 数据缓冲区
可以点选下面的 flash 或 eeprom 进行切换。也可以直接在编辑区进行编辑
4. 编程器测试
如果你的下载器或编程器支持的话可以利用此栏测试你的下载器或编程器进行测试。
对于高压编程器，你可以使用万用表，负表笔连接编程座 20 脚。正表笔连接编程座其
他脚这时点击软件中对应编程座的测试条，红色，5v 输出，蓝色 0v，内部短的测试条除 40
脚出是 5v，其他位置均是 12.5v（这个数字式估测，12-13v 之间均正确）
对于 ISP 下载器测试方法相同，负表笔接 10 脚 gnd，需要注意的 Nc 不起作用。


## ICCAVR编译器
程序的编写采用ICCAVR软件编写它主要有以下几个特点：
1. ICCAVR是一个综合了编辑器和工程管理器的集成工作环境（IDE）；
2. 源文件全部被组织到工程之中，文件的编辑和工程的构筑也在这个环境中完成，错误显示在状态窗口中，并且当你点击编译错误时，光标自动跳转到错误的那一行；
3. 该工程管理器还能直接产生 INTEL HEX格式文件的烧写文件（该格式的文件可被大多数
编程器所支持，可以直接下载到芯片中使用）和符合 AVRStudio的调试文件(COFF格式)。
4. ICCAVR是一个32位的程序，支持长文件名。
5. ICCAVR是一个综合了编辑器和工程管理器的集成开发环境(IDE)，是一个纯32位的程序，可在 Win 95、Win 98、Win ME、Win NT、Win 2000、Win XP和Win 7环境下运行。

## 发光二极管数码管

发光二极管显示器即为新型发光二极管显示器，具有数据显示醒目、成本低、配置灵活、接口可以方便等特点，单片机电源管理控制系统在应用数据管理操作系统的设计中常用它来直接显示电源管理操作系统的日常工作生活的状态和过程中所采集的数据在信息网络中所输入的数值等。

根据大屏幕发光点阵二极管的排列和结构不同，可将大屏幕发光点阵二极管显示器划分为大屏幕发光二极管点阵数码管和大屏幕发光二极管点阵数码显示器。大屏幕发光二极管点阵数码管主要就是用于在屏幕上显示英文数字和一些英文字母和图形符号，发光二极管点阵显示器同样可以在屏幕上显示英文数字、字母、男人和图形等。大屏幕发光点阵二极管数字点阵显示虽然点阵显示灵活，但它们主要占用的是单片微型计算机系统的软硬件资源比大屏幕发光二极管点阵数码管显示器要多得多。除了使用指定的程序，大屏幕发光点阵数码管显示器或led点阵显示器主要用于请求特殊的点阵显示场合，几乎所有的微型计算机系统应用点阵显示系统都使用大屏幕发光二极管数字点阵显示。

### 数字管理

数字管理的显示系统主要有两种显示模式，包括静态数据管理显示程序模式和动态显示程序模式。静态数据管理显示的程序非常不复杂，静态数据管理显示系统的程序模式设计起来非常简单，占用cpu的内存时间很少。仅需要当系统的显示字符串发生更改时才可以调用动态显示程序。但是，硬件和集成电路很多。每个八位数字晶体管都至少必须需要一个8位i/o电源输出输入端口，一个8位限流电源输出驱动器和8个8位限流输出电阻。通常偶尔也可能会需要使用少量的圆形数码管。发光二极管的应用由于静态扫描显示器需要使用较少的电子管组件，并且需要使用更多的静态数字组件与电子管组件在显示器之间进行切换很麻烦。为了有效简化了电路并且大大降低了成本，系统设计使用了一种动态扫描数字显示的方法。

动态扫描显示模式的工作原理是分别打开每个显示器，即一次仅显示一位。为了使用户看到所有的显示器都已显示，必须加快每个显示器的照明周期(增加扫描频率)。通过使用人眼的视觉残留效果，可以实现与连续显示所有显示器相同的效果。动态扫描显示电路如图3.2.2所示：

![图3.2.2动态扫描图](http://my.gunplan.top/static/003.jpg)

