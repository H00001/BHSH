
# 课题研究与开发技术基础

## Atmega8l-8AU 芯片

主芯片的选择：对于本设计来讲有要实现功能很多，测量的量要实现很复杂，同时要求实物体积尽量小，所以就要选择一款功能是十分强大而且外部引脚较多的单片机。所以我选择了Atmega8l-8AU，这种单片机相对比51来讲传输速度更快，内部资源更丰富，同时其驱动能力更强每个端口都能设为输入输出，性价比高。

### Atmega8l-8AU具有的优势
1. 单片机内部具有高质量的Flash程序存储器大小为8K，支持ISP和IAP。便于程序的调试和开发。内部512字节EEPROM就有寿命长，可以长期保存数据避免断电丢失。内部RAM容量大并且能够满足高级语言开发[7]。
2. 单片机的外部I/O接口全部可以设置上拉电阻，并且可以单独设定为输入和输出两种模式。也可以设置为高阻态输入。I/O口具有资源灵活、驱动能力强大、功能强大的特点。
3. 单片机内部包含许多种独立的时钟分频器，为UART、I2C、SPI提供使用。这其中的8位或者16位定时器配合的具有多达10位的预分频器，能够通过程序的设定的分频系数提供多种定时时间[8]。单片机内独有的定时器/计数器双向形成的三角波，在和输出比较寄存器相互配合，形成占空比可变、频率可变、相位可变的方波设计方法[9]。
4. 单片机具备增强型的高速同步异步串口，可以实现硬件生成校验码、硬件检测和校验、两级接收缓冲、在接收时能够主动调整定位波特率，屏蔽数据帧数等功能，提高了通信的可靠性，程序编写更加方便，方便组成分布式网络和实现多机通信系统的复杂应用。由于串口功能十分强大，单片机速度快，中断响应时间比较短，能够实现高波特波特率通信。
5. 具有面向字节的高速硬件串行接口TWI、SPI。TWI与I2C接口兼容，能够实现主从机的接收和发送的全部4种组合的多机通信[10]。
6. 单片机具有自动上电的复位电路、独立的看门狗、低电压检测电路，多个复位源，能够设置在系统启动后延时程序运行。
7. 单片机内还具有多种省电休眠模式，抗干扰能力强

### 特性
AVR 内核具有丰富的指令集和32 个通用工作寄存器。所有的寄存器都直接与算逻单元(ALU) 相连接，使得一条指令可以在一个时钟周期内同时访问两个独立的寄存器。这种结构大大提高了代码效率，并且具有比普通的CISC 微控制器最高至10 倍的数据吞吐率。ATmega8 有如下特点:8K 字节的系统内可编程Flash( 具有同时读写的能力，即RWW)，512 字节 EEPROM，1K 字节 SRAM，32 个通用I/O 口线，32 个通用工作寄存器，三个具有比较模式的灵活的定时器/ 计数器(T/C), 片内/ 外中断，可编程串行USART，面向字节的两线串行接口， 10 位6 路 (8 路为TQFP 与MLF 封装)ADC，具有片内振荡器的可编程看门狗定时器，一个SPI 串行端口，以及五种可以通过软件进行选择的省电模式。工作于空闲模式时CPU 停止工作，而SRAM、T/C、 SPI 端口以及中断系统继续工作。掉电模式时晶体振荡器停止振荡，所有功能除了中断和硬件复位之外都停止工作。

在省电模式下，异步定时器继续运行，允许用户保持一个时间基准，而其余功能模块处于休眠状态； ADC 噪声抑制模式时终止CPU 和除了异步定时器与ADC 以外所有I/O 模块的工作，以降低ADC 转换时的开关噪声； Standby 模式下只有晶体或谐振振荡器运行，其余功能模块处于休眠状态，使得器件只消耗极少的电流，同时具有快速启动能力。本芯片是Atmel 高密度非易失性存储器技术生产的。片内ISP Flash 允许程序存储器通过ISP 串行接口，或者通用编程器进行编程，也可以通过运行于AVR 内核之中的引导程序进行编程。引导程序可以使用任意接口将应用程序下载到应用Flash存储区(Application Flash Memory)。在更新应用Flash存储区时引导Flash区(Boot Flash Memory)的程序继续运行，实现了RWW 操作。 通过将8 位RISC CPU 与系统内可编程的Flash 集成在一个芯片内，ATmega8 成为一个功能强大的单片机，为许多嵌入式控制应用提供了灵活而低成本的解决方案。


## C语言
C语言是一门面向过程的、抽象化的通用程序设计语言，广泛应用于底层开发。C语言能以简易的方式[编译]、处理低级[存储器]。C语言是仅产生少量的机器语言以及不需要任何运行环境支持便能运行的高效率程序设计语言。尽管C语言提供了许多低级处理的功能，但仍然保持着跨平台的特性，以一个标准规格写出的C语言程序可在包括类似嵌入式处理器以及超级计算机等作业平台的许多[计算机平台]上进行编译。

## C语言具有的特点

1. 简洁紧凑、灵活方便   
C语言一共只有32个关键字,9种控制语句，程序书写自由，主要用小写字母表示。它把高级语言的基本结构和语句与低级语言的实用性结合起来。 C 语言可以象[汇编语言一样对位、字节和地址进行操作, 而这三者是计算机最基本的工作单元。 
2. C的运算符包含的范围很广泛  
共有种34个运算符。C语言把括号、赋值、强制类型转换等都作为运算符处理。从而使C的运算类型极其丰富表达式类型多样化，灵活使用各种运算符可以实现在其它高级语言中难以实现的运算。 3、数据结构丰富 
3. C的数据类型灵活   
整型、实型、字符型、数组类型、指针类型、结构体类型、共用体类型等。能用来实现各种复杂的数据类型的运算。并引入了指针概念,使程序效率更高。另外C语言具有强大的图形功能, 支持多种显示器和驱动器。且计算功能、逻辑判断功能强大。 
4. C是结构式语言    
结构式语言的显著特点是代码及数据的分隔化,即程序的各个部分除了必要的信息交流外彼此独立。这种结构化方式可使程序层次清晰，便于使用、维护以及调试。C语言是以函数形式提供给用户的,这些函数可方便的调用,并具有多种循环、条件语句控制程序流向，从而使程序完全结构化。 
5. C语法程序设计自由度大   
一般的高级语言语法检查比较严，能够检查出几乎所有的语法错误。而C语言允许程序编写者有较大的自由度。
6. C语言允许直接访问物理地址，可以直接对硬件进行操作  
因此既具有高级语言的功能，又具有低级语言的许多功能，能够象汇编汇编语言一样对位、字节和地址进行操作,而这三者是计算机最基本的工作单元，可以用来写系统软件。
7. C语言程序生成代码质量高，程序执行效率高    
一般只比汇编程序生成的目标代码效率低10へ20%，并且现代编译器优化后甚至超过汇编效率。 
8、 C语言适用范围大，可移植性好    
C语言有一个突出的优点就是适合于多种操作系统, 如DOS、UNIX,也适用于多种机型。C语言对操作系统和系统使用程序以及需要对硬件进行操作的场合，用C语言明显优于其它高级语言，许多大型应用软件都是用C语言编写的。 C语言具有绘图能力强，可移植性，并具备很强的数据处理能力，因此适于编写系统软软件。

正是因为有了简洁紧凑、灵活方便，运算符包含的范围很广泛，生成代码质量高，程序设计自由度大，结构式语言等特点，因此选择c语言来开发这个系统

## MF52NTC热敏电阻

NTC（负温度系数）是负百分比电阻变化每度℃.要确定一个精确的电阻误差的热敏电阻的温度系数，高精度小体积MF52NTC热敏电阻探头要比玻封外型探头更小而引线绝缘，其设计非常可靠,工作环境温度 -50℃至125℃，快速的反应时间和高可靠性使它更加适用于医疗设备和电子温度计产品系列.

过热保护器件用于保护设备及内部电路，防止受到发热的影响。
PTC热敏电阻（温度检测传感器)在室温环境下电阻值不会发生变化，但一旦超过某一温度（居里点)，电阻值便会急速上升，通过利用这一特性，能够检测到异常发热。
此外，贴片NTC热敏电阻应用了从积层贴片陶瓷片式电容器中积累而来的积层技术，并在世界范围内率先生产出了行业最小形状的产品。

### 热敏电阻主要有以下几个特点：

1. 电阻温度系数大，灵敏度高，通常温度变化1℃，阻值就变化1%~6%,戴南组温度系数绝对值比一般的金属电阻大10~100倍。
2. 结构简单，体积小。
3. 高电阻率，较小的热惯性，适合动态测量。
4. 使用方便，组织和温度变化成非线性关系。

### NTC负温度系数热敏电阻构成

NTC（Negative Temperature Coefficient）是指随温度上升电阻呈指数关系减小、具有负温度系数的热敏电阻现象和材料．该材料是利用锰、铜、硅、钴、铁、镍、锌等两种或两种以上的金属氧化物进行充分混合、成型、烧结等工艺而成的半导体陶瓷，可制成具有负温度系数（NTC）的热敏电阻．其电阻率和材料常数随材料成分比例、烧结气氛、烧结温度和结构状态不同而变化．现在还出现了以碳化硅、硒化锡、氮化钽等为代表的非氧化物系NTC热敏电阻]材料。

### NTC热敏电阻的温度特性符合指数规律

NTC热敏半导瓷大多是尖晶石结构或其他结构的氧化物陶瓷，具有负的温度系数，电阻值可近似表示为：
$ R_t = RT *EXP(Bn*（1/T-1/T_0) $
式中RT、RT0分别为温度T、T0时的电阻值，Bn为材料常数．陶瓷晶粒本身由于温度变化而使电阻率发生变化，这是由半导体特性决定的。

### MF52NTC热敏电阻参数
温度传感器绝缘引线规格: UL 3398 22AWG.黑色  
传感器端子规格：XH 2.5黑色 
HOUSING规格：XH 2.5-2P.  
NTC温度传感器未标注尺寸公差为±1.5mm.  
热敏电阻器符合RoHS要求.  
NTC热敏电阻规格：R25=10K±1% B25/85=3435  

### MF52NTC热敏电阻特点
1. 体积小适用于狭窄空间
2. 快速响应时间，灵敏度高
3. .引线耐弯折及易焊接
4. 热敏电阻优良的电绝缘性能
5. NTC探头引线尺寸可按要求定制



## Progisp

progisp是一款USB编程下载器，支持对所有的AVR芯片进行编程，还可以对数据改变下载、比较识别字，芯片擦除等选项进行选择。

### 功能特点

1. 可通过progisp对免驱动USB下载器进行在线升级。
2. 可以编写所有atmel的低压isp编程接口的avr单片机/s5x/s8253/93cxx/24cxx
3. 可以通过progisp自定义支持最新型号的芯片的编程。
4. 适应电压宽（2.7v-5.5v）
5. 可为目标板提供时钟（对于AVR锁定芯片特别有用）
6. 可超低速下载（使用32768HZ的精振）
7. 下载速度快（8K程序大约2秒）
8. 可配合progisp实现编程项目的工程化管理

### 使用方式
1. 选择芯片
点击选择芯片的下拉框，选择要下载的芯片。
点击“黑色的箭头”可以弹出下载器与你的目标 cpu 的提示接线图或 cpu 在编程座上的
摆放位置图，如果是 isp 下载线是 10pin下载线接口与目标 cpu的连线示意图
如果是 hv 模式是 cpu 在编程座上的摆放位置图
2. 编程选项
勾选“编程栏”相应的编程选项，点击“自动”可以完成编程。如果出错会有对话框弹
出进行提示。如果写入成功，信息提示栏会显示出相应成功的信息。也可以点击“擦除”擦
除芯片。
* 提供时钟：勾选配合下载器的 XTAL 引脚可以解锁部分 avr 锁定芯片（ISP 模式有用）使
  用方法 XTAL 连接目标板 cpu 的 XTAL1 引脚。这时就可以进入编程模式（锁定芯片是进入
  不了编程模式的）。
* 数据改变下载：指的是你调入的数据区的文件一旦改变，progisp 会自动执行“自动”执
  行相应的动作。
* 数据自动重载：指的是你调入的数据区的文件一旦改变且您点击了”自动“按钮，progisp
  会重新调入您调入数据的文件，这个选项选中关闭 progisp，下次启动时会自动调入您最后
  一次调入的文件。
  所有的动作均可选择相应的主菜单来实现。
3. 数据缓冲区
可以点选下面的 flash 或 eeprom 进行切换。也可以直接在编辑区进行编辑
4. 编程器测试
如果你的下载器或编程器支持的话可以利用此栏测试你的下载器或编程器进行测试。
对于高压编程器，你可以使用万用表，负表笔连接编程座 20 脚。正表笔连接编程座其
他脚这时点击软件中对应编程座的测试条，红色，5v 输出，蓝色 0v，内部短的测试条除 40
脚出是 5v，其他位置均是 12.5v（这个数字式估测，12-13v 之间均正确）
对于 ISP 下载器测试方法相同，负表笔接 10 脚 gnd，需要注意的 Nc 不起作用。

## ICCAVR编译器

ImageCraft  的ICCAVR 是一种使用符合 ANSI 标准的 C 语言来开发微控制器 MCU程序的一个工具。 

### 主要有以下几个特点

1. ICCAVR是一个综合了编辑器和工程管理器的集成工作环境（IDE）；
2. 源文件全部被组织到工程之中，文件的编辑和工程的构筑也在这个环境中完成，错误显示在状态窗口中，并且当你点击编译错误时，光标自动跳转到错误的那一行；
3. 该工程管理器还能直接产生 INTEL HEX格式文件的烧写文件（该格式的文件可被大多数
编程器所支持，可以直接下载到芯片中使用）和符合 AVRStudio的调试文件(COFF格式)。
4. ICCAVR是一个32位的程序，支持长文件名。
5. ICCAVR是一个综合了编辑器和工程管理器的集成开发环境(IDE)，是一个纯32位的程序，可在 Win 95、Win 98、Win ME、Win NT、Win 2000、Win XP和Win 7环境下运行。

### ICCAVR 中的文件类型及其扩展名
文件类型是由它们的扩展名决定的 IDE 和编译器可以使用以下几种类型的文件。

输入文件：

.c  扩展名----表示是 C 语言源文件  
.s  扩展名----表示是汇编语言源文件  
.h  扩展名----表示是 C 语言的头文件  
.prj 扩展名----表示是工程文件 这个文件保存由 IDE 所创建和修改的一个工程的有关信息。  
.a  扩展名----库文件 它可以由几个库封装在一起 libcavr.a 是一个包含了标准 C 的库和 AVR特殊程序调用的基本库 如果库被引用 链接器会将其链接到您的模块或文件中您也可以创建或修改一个符合你需要的库。

## 发光二极管数码管

发光二极管显示器即为新型发光二极管显示器，具有数据显示醒目、成本低、配置灵活、接口可以方便等特点，单片机电源管理控制系统在应用数据管理操作系统的设计中常用它来直接显示电源管理操作系统的日常工作生活的状态和过程中所采集的数据在信息网络中所输入的数值等。

根据大屏幕发光点阵二极管的排列和结构不同，可将大屏幕发光点阵二极管显示器划分为大屏幕发光二极管点阵数码管和大屏幕发光二极管点阵数码显示器。大屏幕发光二极管点阵数码管主要就是用于在屏幕上显示英文数字和一些英文字母和图形符号，发光二极管点阵显示器同样可以在屏幕上显示英文数字、字母、男人和图形等。大屏幕发光点阵二极管数字点阵显示虽然点阵显示灵活，但它们主要占用的是单片微型计算机系统的软硬件资源比大屏幕发光二极管点阵数码管显示器要多得多。除了使用指定的程序，大屏幕发光点阵数码管显示器或led点阵显示器主要用于请求特殊的点阵显示场合，几乎所有的微型计算机系统应用点阵显示系统都使用大屏幕发光二极管数字点阵显示。

### 数字管理

数字管理的显示系统主要有两种显示模式，包括静态数据管理显示程序模式和动态显示程序模式。静态数据管理显示的程序非常不复杂，静态数据管理显示系统的程序模式设计起来非常简单，占用cpu的内存时间很少。仅需要当系统的显示字符串发生更改时才可以调用动态显示程序。但是，硬件和集成电路很多。每个八位数字晶体管都至少必须需要一个8位i/o电源输出输入端口，一个8位限流电源输出驱动器和8个8位限流输出电阻。通常偶尔也可能会需要使用少量的圆形数码管。发光二极管的应用由于静态扫描显示器需要使用较少的电子管组件，并且需要使用更多的静态数字组件与电子管组件在显示器之间进行切换很麻烦。为了有效简化了电路并且大大降低了成本，系统设计使用了一种动态扫描数字显示的方法。

动态扫描显示模式的工作原理是分别打开每个显示器，即一次仅显示一位。为了使用户看到所有的显示器都已显示，必须加快每个显示器的照明周期(增加扫描频率)。通过使用人眼的视觉残留效果，可以实现与连续显示所有显示器相同的效果。

