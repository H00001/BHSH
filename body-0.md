# 绪 论
## 温度控制系统研究的目的和重要性
在人类历史上，环境温度起着极其重要的作用。环境温度是工业生产中最常见的工艺参数之一。每个物理变化和每个化学反应过程都与温度密切相关。因此，温度控制是生产自动化中的重要任务。随着社会的发展，科学技术的进步以及温度测量设备在各个领域的使用，智能化是现代温度控制系统发展的主要组成部分。尤其是近年来，温度控制系统已经应用于人们生活的各个方面，但是温度控制一直是一个尚未发展的领域，但这是一个与人类息息相关的世纪之久的问题。在这种实际情况下，温度控制系统的设计具有广阔的应用前景和重要性。

此结构是为室温控制系统设计的，控制对象是室温。温度控制通常用于日常生活和工业领域，例如用于冷室，洗澡池，酵母池，电源和其他地方的温度控制。过去，温度控制是手动进行的，没有给予足够的重视。实际上，在许多地方都必须很好地调节温度。鉴于此问题，此系统设计的目的是创建一个可使其自身适应设定温度的系统。它被广泛使用，功能强大，小巧美观，易于携带。这是一种实用且廉价的控制系统。

## 温度控制系统研究概况
国外对温度控制技术的研究始于1970年代。首先，使用模拟组合仪器来收集现场信息并执行指令，记录和控制。分布式控制系统出现在1980年代后期。目前正在开发用于计算机数据采集的控制系统的集成多因素控制系统。当前，温度测量和控制技术在全球不同国家中迅速发展，并且一些国家正在朝着完全自动化和无人值守的方向发展。

中国对温度测量和控制技术的研究相对较晚，始于1980年代。中国工程师和技术人员已经吸收了工业化国家对温度测量和控制技术的吸收，从而掌握了室内温度的微机控制技术。该技术仅限于控制环境中的单个温度因子。中国温度测控设备的计算机应用一般处于从消化吸收阶段，易应用阶段到实用化，全面应用阶段的过渡和发展。从技术上讲，大多数情况下都存在由单片机控制的单参数单回路系统，并且没有真正的集成多参数控制系统。与工业化国家相比，差距很大。我国温度测控的现状还远远没有达到工业化水平。生产中仍有很多困扰我们的问题。设备支持能力差，工业化程度低，环境控制落后，软件和硬件资源无法共享和可靠。缺点，例如不良性行为。

## 温度传感器技术

传感器技术是现代信息技术的主要内容之一，信息技术包括计算机技术、通信技术和传感器技术。计算机和通信技术发展极快，相当成熟，而传感器应用技术因为需要使用模拟技术，而模拟技术还有很多问题难以解决，因此传感器应用技术也有待进一步发展。为了适应现代科学技术的发展，世界总舵国家都把传感器技术列为现代的关键技术之一。通常将能把非电量转换为电量的器件称为传感器，其实质上是一种功能块，作用是将来自外界的各种信号转换成电信号。它是实现测试与自动控制系统的首要环节。如果没有传感器对原始参数进行精确可靠地测量，那么无论是信号转换或信息处理，或者最佳数据的显示和控制都将无法实现。 

温度传感器，使用范围广，数量多，居各种传感器之手。温度传感器的发展大致经历了以下三个阶段：传统的分立式温度传感器（含敏感元件），主要输能够进行非电量和电量之间的转换；模拟集成温度传感器/控制器；智能温度传感器。目前，国际上新型温度传感器正从模拟式向数字式、集成化、智能化及网络化的方向发展。温度传感器按传感器与被测介质的接触方式可分为接触式温度传感器和非接触式温度传感器两大类，其中，接触式温度传感器的测温元件与被测对象要有良好的热接触，通过热传导及对流原理达到热平衡，这个示值即为被测对象的温度。这种测温方法精度比较高，并可测量物体内部的温度分布。但对于运动的、热容量比较小的及对感温元件有腐蚀作用的对象，这种方法将会产生很大的误差。非接触测温的测温元件与被测对象互不接触。常用的是辐射热交换原理。此种测温方法的主要特点是可测量运动状态的小目标及热容量小或变化迅速的对象，也可测量温度场的温度分布，但受环境的影响比较大。 

温度传感器的发展大致可分为以下几种：  
1. 热电偶传感器。热点偶传感器是工业测量中应用最广泛的一种温度传感器，它与被测对象直接接触，不受中间介质的影响，具有较高的精度；测量范围广，可从-50℃～1600℃进行连续测量，特殊的热电偶如金,铁,镍,铬最低可测到-269℃，钨,铼最高可达2800℃。
2. 模拟集成温度传感器。采用硅半导体集成工艺制成的，因此亦称硅传感器或单片集成温度传感器。模拟集成温度传感器是在20世纪80年代问世的，它将温度传感器集成在一个芯片上、可完成温度测量及模拟信号输出等功能。模拟集成温度传感器的主要特点是：功能单一、测温误差小、价格低、响应速度快、传输距离远、体积小、微功耗等，适合远距离测温，不需要进行非线性校准，外围电路简单。
3. 光纤传感器。光纤测温技术可分为两类:全辐射测温法，单辐射测温法，双波长测温法，多波长测温法等。特点是：光纤挠性好、透光谱段宽、传输损耗低，无论是就地使用或远传均十分方便而且光纤直径小，可以单根、成束、Y型或阵列方式使用，结构布置简单且体积小。缺点是：测量起来困难,难于实现较高的精度，工艺比较复杂,且造价高，推广应用有一定困难。
4. 半导体吸收式光纤温度传感器。半导体吸收式光纤温度传感器是利用了半导体材料的吸收光谱随温度变化的特性实现的。一种传光型光纤温度传感器，是指在光纤传感系统中，光纤仅作为光波的传输通路，而利用其它如光学式或机械式的敏感元件来感受被测温度的变化。在这类传感器中，半导体吸收式光纤温度传感器是研究得比较深入的一种。
5. 智能温度传感器。智能温度传感器(亦称数字温度传感器）是在20世纪90年代中期问世的。它是微电子技术、计算机技术和自动测试技术（ATE）的结晶。目前，国际上已开发出多种智能温度传感器系列产品。智能温度传感器内部包含温度传感器、A/D传感器、信号处理器、存储器（或寄存器）和接口电路。有的产品还带多路选择器、中央控制器（中央处理单元）、随机存取存储器（随机存取存储器）和只读存储器（只读存储器）。智能温度传感器能输出温度数据及相关的温度控制量，适配各种微控制器（M中央处理单元），并且可通过软件来实现测试功能，即智能化取决于软件的开发水平。
6. 数字温度传感器 // todo 补充

## 本文研究的目的和意义
由于传统的温湿度监测装置主要使用51单片机，而在温湿度采集使用了大量的逻辑电路结构复杂，传输速度慢，而且利用这种方法生产的仪表大多是只能对柜内的温湿度进行采集和显示，而且误差较大，不适合安装在配电柜内，而本市采用Atmega8l-8AU单片机，其内部资源相对比51更为丰富，而且内部含有AD转换模块，省去大部分仪表对温湿度采集后还须设计放大及AD转换电路，来进行数据转换接收，这样相对比传统仪表本设计电路更加简单而且可靠性更强，能够适应配电柜内复杂电气环境，可以对内部断路器或者电力电子设备进行监测，更好的保证配电柜稳定正常运行。

随着互联网技术的发展，未来配电柜必然向着网络化的方向发展，实现整个配电系统的计算机网络化控制，这样对于监测仪表来讲，快速的数据传输，较大的内存空间已成为发展趋势，本设计正是由于这样的一个出发点设计，利用单片机集成化和快速的处理能力能够更好地适应将来市场发展，具备比传统仪表更高的市场潜力。

本设计通过对配电柜内部高压断路器或者电力电子设备进行温湿度采集监测，通过报警保证配电柜内主要工作器件的稳定工作，实现对于配电柜的保护和监测功能。本设计的研究，符合现在以及未来市场的需求，具有较高的实际意义，本设计不仅功能多、结构简单，由于采用更为精确的传感器进行数据采集，误差小，因此能够应用于更多的领域，由于我国电力系统的稳定和发展，能够保证电能更好地输送和分配，降低电力系统的危险，保障了变电所工作人员的人身安全。具有很大的研发意义。

## 设计主要内容
本文从传统的高压配电柜温湿度监测方法入手，分析了其对高压配电柜柜内温度检测的优点和不足。结合当前科技的发展，本文提出了一种基于 Atmega8-8AU单片机的异常温湿度监测报警系统的设计，实现对配电柜柜内温湿度的实时监测的目的。在本设计中，详细介绍了整个系统的功能以及整个系统的硬件和软件的设计。具体内容如下： 

首先，本文首先第一章介绍了对配电柜柜内温湿度监测的背景、发展现状及目的意义，阐述了本课题研究的出发点以及要达到的目标。系统地介绍了不同时期对高压配电柜柜内温湿度监测的方法，以及目前对高压配电柜温湿度监测的主要方式。介绍了现在国内对于温湿度监测技术的发展情况。通过分析配电柜故障出现的原因，依据配电柜工作与高压、高温、强电磁环境中的实际情况，通过自己学习知识和和实际调查，最终选择了一种利用热敏电阻测温，HS1101湿度传感器测湿的集成传感器实现温湿度的测量，利用单片机将传感器采集的数据进行处理实现配电柜柜内的温湿度的监测。第二章通过对硬件电路的设计阐述，将本设计实现的方式展现出来，讲述了设计原理。第三章则对软件设计部分进行了讲解，阐述了本设计在软件设计部分的思路和实现方法。第四章是对本设计整体可靠性能进行了相应分析，保证了整个系统的实际可行性。第五章对于实物进行实际的比较和分析。
### 总体设计原则
由于本设计的产品是应用在配电柜，在技术参数上参考的KYN28-12配电柜，所以在设计时元器件的选择要满足其技术要求。要实现对于柜内温、湿度实时监测，而且考虑到配电柜内复杂的工作环境，所以系统要有很好抗干扰能力，同要求测量结果精确并且能够通过数码管显示出来，通过对柜内温湿度值的判断进行相应的显示和报警。同时作为一个适应市场的设计那么其设计外观要适应配电柜仪表室的空间，所以要求体积尽量小，成本低，性价比高的芯片和电路设计。
### 设计方法实现
由于对于一款仪表的设计工作量十分繁重而且十分复杂，那么再设计过程中就要将系统模块划分通过一部部的模块设计最终完成整个及系统的设计[5]。
1. 硬件电路的实现  
硬件电路的设计就是要将设计中要实现功能转变为现实。通过单片机控制，外围电路的设计来实现整个系统的功能。那么对硬件电路设计就应该包括主控制器的外围接口的设计，还有其复位电路，时钟电路，报警电路。由于配电内的仪表室供电电压为220V交流电，单片机的供电电压为5V直流电。所以还需设计电源转换模块。将仪表能够直接在仪表室内取电使用，在要求实现显示、控制就包括显示电路、按键电路，和相应控制电路。对于要测量的采集就需要传感器使用那么对传感器的选择，对于这里，我选择了我实习公司生产的一款传感器，这款传感器结构简单功能齐全。
2. 软件设计  
对于软件在本设计中起着很重要的作用，系统的参数和驱动都是依靠软件来实现的。在系统中虽然只测量的量只有温湿度，但由于这两个量都是非电的物理量，这就需要在软件设计时添加很多算法和函数，这就使得程序变得复杂，在这里温度由于传感器直接采集电压信号所以就要添加A/D模块，由于热敏电阻的特性在程序设计师究竟是用插值法和查表法，湿度是频率信号的形式传输的，那么就可以采取利用外部时钟信号来启动定时器/计数器来测量，就需要在硬件内启动多个定时器和计数器的使用。加大了主程序的难度，那么在程序设计的时候就应该采用模块化的方法，将复杂程序进行简化，通过各个模块的相互配合来实现这个软件程序的驱动。
3. 软件和硬件的相互协调  
在某些特别的模块是可以同硬件来实现也可以通过软件实现的。通过软件和硬件相互协调可以优化设计方案，提高设计的质量，性能，降低设计的成本和负担，以软件为主的方案能降低成本，但需要投入大量的时间来进行软件设计。从可靠性来讲，硬件设计的越多那么器件的选择，焊接的质量会造成很多故障点；而软件会是在故障排除后，其可靠性不会发生改变相对稳定。所以在具体设计中应该结合系统的设计要求和相互对比在一些易于出现故障的地方进行反复的推敲，来确定是用软件设计来代替还是通过硬件设计来消除故障的发生，从而优化系统。

## 系统工作原理

单片机温度控制系统是以AT89C51单片机为控制核心，辅以采样反馈电路，驱动电路，晶闸管主电路对电炉炉温进行控制的微机控制系统。系统的原理框图如图2-1所示，其基本控制原理为: 用键盘将温度的设定值送入单片机，并在发光二极管显示，启动运行后，通过信号采集电路将温度信号采集到后，送入单片机系统进行PID 控制运算，将控制量输出，改变可控硅管的接通时间便可改变加热丝功率，以达到调节温度的目的控制电阻炉的加热。

当由于环境温度变化太剧烈或由于加热或降温设备出现故障，或者温度传感头出现故障导致在一段时间内不能将环境温度调整到规定的温度限内的时候，单片机通过三极管驱动扬声器发出警笛声。 

本毕业设计就是就应这样要求结合自己学习的知识设计一种能够实现对于温湿度能够进行实时的监测及报警，本设计具有精度高，电路简单，反应速度快，抗干扰性能强的特点整体结构包括硬件结构：主电路设计，显示电路、键盘电路。软件结构：主程序、温湿度采集程序，显示程序。程序采用progisp下载器将程序下载到单片机中。

### 方案一

![图1-1 第一个方案](http://my.gunplan.top/static/1.0.0.PNG) //   抄错了

图1-1为第一个设计方案，该方案的工作原理简述如下：

1. 锯齿波是由单结晶体管BT和R1，R2，R3，W1和C1组成的张驰震荡产生，然后经射极跟随器V1、R4输出。
2. 控制电压（Uk）与锯齿波电压进行电流叠加后送到V2的基极，合成电压为Us，当Us>0（0.7）时V2导通，Us<0，则V2截止。
3. 由V2、V3以及R8、R9、DW1组成一直流开关，当V2基极电压Ube2>0(0.7)，V2导通，Ube3接近零电位，V3截止，直流开关导通。输出24V直流电压。
4. 过零脉冲的输出，由同步变压器TB，整流桥D1及R10，R11组成一削波同步电源，这个电源与直流开关的输出电压共同去控制V4与V5。只有当直流开关导通期间，V4截止，V4、V5基电极和发射极之间才有工作电压，才能工作在期间，同步电压每次过零时，V4截止，其集电极输出正电压，使V5由截止转导通，经脉冲变压器输出触发脉冲而此脉冲使晶闸管T在需要导通的时刻导通。

在直流开关导通期间使出连续的正弦波控制电压Uk的大小决定了直流开关导通时间的长短，也就决定了在设定周期内导通的周波数，从而可输出功率的调节。显然，控制电压Uk越大，则导通的周波数就越多，输出的功率也就越大，电阻炉的温度也就越高，反之，电阻炉的温度就越低。

闭环控制自动调温的基本指导思想是在系统中增设温度传感器和温度调节器，温度传感器的基本功能是检测电炉的实际温度，并变换成电压讯号和炉温控制电压Uk进行比较，根据两者差值的大小（Δe=Uk-Uft）和变化方向（即△e为正还是为负），通过调节器进行相反方向的调节，使调节器的输出控制直流开关导通时间的长短，从而使设定周期内晶闸管的导通周波数增大或者减小，相应的电炉温度升高一点或者减小一点。采取这种控制方式，可以使炉温在较小的范围内变化，控制精度高。


### 方案二
为了使得电路的简单化，采用单片机作为控制核心来设计本课题，温度信号采集使用温度传感器DS18B20，温度控制的基本思想为：通过采集到的温度与标准温度之间的差值来控制加热电阻丝的通电时间长短，从而起到恒温控制的目的。方案二的设计框图如下图所示：

![图1-2](http://my.gunplan.top/static/1.0.0.PNG)

本方案采用单片机作为控制核心，使用温度传感器进行温度采集，通过将采集到的温度与标准设定温度之间的差值进行温度控制，从而使得温度维持在标准设定温度。本方案设计成本低，具有具有较高的可靠性，对于系统动态性能与稳定要求不是很高的场合非常的合适。

单片机温度控制系统是以AT89C51单片机为控制核心，辅以采样反馈电路，驱动电路，晶闸管主电路对电炉炉温进行控制的微机控制系统。系统的原理框图如图2-1所示，其基本控制原理为: 用键盘将温度的设定值送入单片机，并在LED显示，启动运行后，通过信号采集电路将温度信号采集到后，送入单片机系统进行PID 控制运算，将控制量输出，改变可控硅管的接通时间便可改变加热丝功率，以达到调节温度的目的控制电阻炉的加热。

当由于环境温度变化太剧烈或由于加热或降温设备出现故障，或者温度传感头出现故障导致在一段时间内不能将环境温度调整到规定的温度限内的时候，单片机通过三极管驱动扬声器发出警笛声。

## 系统功能介绍
本设计是对房间温度进行检测与控制，设计的温度控制系统实现了基本的温度控制功能：当温度低于设定的温度时，系统自动通过PWM启动加热装置，使温度上升。当温度高于设定的温度时，停止加热。三位数码管及时显示温度，精确到小数点后一位。  
本文设计的温度控制系统具有如下功能：
1. 通过温度芯片DS18B20采集温度，并以数字信号的方式传送给单片机。
2. 四位数码管动态实时显示房间温度，显示精度0.10C。
3. 三个按键实现标准温度的设定。
4. 利用PWM实现温度的控制。

//每一项都介绍
